/*! uppie v1.1.0 | (c) silverwind | BSD license */
!function(e,n){"function"==typeof define&&define.amd?define([],n):"object"==typeof module&&module.exports?module.exports=n():e.Uppie=n()}("undefined"!=typeof self?self:this,function(){"use strict";return function(){var t={name:"files[]"};return function(e,n,i){"function"==typeof n?(i=n,n=t):(n||(n={}),n.name||(n.name=t.name)),e instanceof NodeList?[].slice.call(e).forEach(function(e){a(e,n,i)}):a(e,n,i)}};function a(e,i,t){if("input"===e.tagName.toLowerCase()&&"file"===e.type)e.addEventListener("change",function(e){var n=e.target;n.files&&n.files.length?r(n,i,t.bind(null,e)):"getFilesAndDirectories"in n?o(n,i,t.bind(null,e)):t(e)});else{var n=function(e){e.preventDefault()};e.addEventListener("dragover",n),e.addEventListener("dragenter",n),e.addEventListener("drop",function(e){e.preventDefault();var n=e.dataTransfer;n.items&&n.items.length&&"webkitGetAsEntry"in n.items[0]?function(e,a,n){var o=new FormData,r=[],i=[];function l(e,t,i){t||(t=e.name),function i(t,e,a,o){var r=e||t.createReader();r.readEntries(function(e){var n=a?a.concat(e):e;e.length?setTimeout(i.bind(null,t,r,n,o),0):o(n)})}(e,0,0,function(e){var n=[];e.forEach(function(e){n.push(new Promise(function(i){e.isFile?e.file(function(e){var n=t+"/"+e.name;o.append(a.name,e,n),r.push(n),i()},i.bind()):l(e,t+"/"+e.name,i)}))}),Promise.all(n).then(i.bind())})}[].slice.call(e).forEach(function(e){(e=e.webkitGetAsEntry())&&i.push(new Promise(function(n){e.isFile?e.file(function(e){o.append(a.name,e,e.name),r.push(e.name),n()},n.bind()):e.isDirectory&&l(e,null,n)}))}),Promise.all(i).then(n.bind(null,o,r))}(n.items,i,t.bind(null,e)):"getFilesAndDirectories"in n?o(n,i,t.bind(null,e)):n.files?r(n,i,t.bind(null,e)):t(e)})}}function o(e,o,i){var r=new FormData,l=[],f=function(e,t,n){var a=[];e.forEach(function(i){a.push(new Promise(function(n){if("getFilesAndDirectories"in i)i.getFilesAndDirectories().then(function(e){f(e,i.path+"/",n)});else{if(i.name){var e=(t+i.name).replace(/^[/\\]/,"");r.append(o.name,i,e),l.push(e)}n()}}))}),Promise.all(a).then(n)};e.getFilesAndDirectories().then(function(n){new Promise(function(e){f(n,"/",e)}).then(i.bind(null,r,l))})}function r(e,n,i){var t=new FormData,a=[];[].slice.call(e.files).forEach(function(e){t.append(n.name,e,e.webkitRelativePath||e.name),a.push(e.webkitRelativePath||e.name)}),i(t,a)}});